<%- include('../partials/header') %>


<div id="user-show-grid">
    <h3>Name:</h3>
    <p><%= user.name %></p>
    <h3>Role:</h3>
    <p><%= user.role %></p>
</div>


<br>
<br>

<div id="assigned-patients-grid">

<section>
    <div>
      <h3>Assigned Patients</h3>
      <ul>
        <% patients.forEach(p=>{%>
          <li><a href="/patients/<%=p._id%>"><%=p.name%> - <small><%= p.DOB.toLocaleDateString() %></small></a>
        

            <form action="/users/<%=user._id%>/?_method=PUT" method="POST" id="unassign-patient-form">
                <input type="hidden" name="patientId" value="<%=p._id%>">
            <button type="submit">Unassign Patient</button>
           </form>

        <% })%>


      </ul>
    </div>

    <br>

    <h4>Select a patient to add to patient assignments for <%= user.name %>:</h4>
<form method="POST" action="/users/<%=user._id%>">
  <select name="patientId">
    <% availableOptions.forEach(p =>{%>
    <option value="<%=p._id%>"><%= p.name %> | DOB:  <%= p.DOB.toLocaleDateString() %> | <%= p._id %></option>
    <%})%>
    <option selected disabled>
      <%= availableOptions.length ? "Select Patient" : "No available patients" %>
    </option>
  </select>
    <div>
        <br>
        <input type="submit" value="Assign Patient" />
    </div>
    <br>
</form>

</section>

</div>

</section>


<%- include('../partials/footer') %>

